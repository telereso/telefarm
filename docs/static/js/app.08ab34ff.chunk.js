(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{173:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));n(327);var a=n(0),r=n.n(a),i=n(132),c=n(342),o=n(194),s=n(232),l=n(122),u=n(3);l.a();var d=Object(c.a)();function m(){return r.a.createElement(i.a,null,r.a.createElement(d.Navigator,null,r.a.createElement(d.Screen,{name:"Login",component:f}),r.a.createElement(d.Screen,{name:"Select Device",component:o.a}),r.a.createElement(d.Screen,{name:"Device",component:s.a})))}function f(t){var n=t.navigation;return new BroadcastChannel("auth-channel").onmessage=function(t){e.idToekn=t.data,n.navigate("Select Device")},r.a.createElement(u.a,{style:{flex:1,alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{className:"g-signin2","data-onsuccess":"onSignIn","data-theme":"dark"}))}}).call(this,n(40))},194:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var a=n(18),r=n.n(a),i=n(15),c=n.n(i),o=n(229),s=n(81),l=n(30),u=n(1),d=n(24),m=n(3),f=n(0),p=n.n(f),g=n(125),v=n(138),b=(n(329),n(122));v.initializeApp({apiKey:"AIzaSyByJlNuPKr9mQ_MmW0xw1_AQYfMDZ3rXwg",authDomain:"instamaterial-2eb76.firebaseapp.com",projectId:"instamaterial-2eb76",storageBucket:"instamaterial-2eb76.appspot.com",messagingSenderId:"193172152804",appId:"1:193172152804:web:72f74e5f7ac226d409a7f1",measurementId:"G-5KJ4F2NMQC"});var h=v.messaging();function E(t){t.navigation;var a=Object(f.useState)([]),i=r()(a,2),u=i[0],v=i[1],E=Object(f.useRef)(u);function x(){fetch("https://us-central1-instamaterial-2eb76.cloudfunctions.net/devices?token="+e.fcmToken,{method:"GET",headers:{Authorization:"Bearer "+e.idToekn}}).then((function(e){return e.json()})).then((function(e){v(e)}))}return E.current=u,Object(f.useEffect)((function(){h.onMessage((function(e){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.data.state,t.next="NA"===t.t0?3:"devices_refreshed"===t.t0?5:"reserved"===t.t0?7:"A"===t.t0?9:"setup"===t.t0?11:"ready"===t.t0?13:15;break;case 3:return v(u.filter((function(t){return t.serial!=e.data.serial}))),t.abrupt("break",16);case 5:return x(),t.abrupt("break",16);case 7:return v(E.current.map((function(t){return t.serial==e.data.serial&&(t.state="reserved"),t}))),t.abrupt("break",16);case 9:return v(E.current.map((function(t){return t.serial==e.data.serial&&(t.state=null),t}))),t.abrupt("break",16);case 11:return v(E.current.map((function(t){return t.serial==e.data.serial&&(t.state=e.data.state+"..."),t}))),t.abrupt("break",16);case 13:return v(E.current.map((function(t){return t.serial==e.data.serial&&(t.state="open",t.url=e.data.url),t}))),t.abrupt("break",16);case 15:console.log(e);case 16:case"end":return t.stop()}}),null,null,null,Promise)})),x()}),[]),p.a.createElement(m.a,{style:{flex:1,alignItems:"center",justifyContent:"center"}},p.a.createElement(s.a,{data:u,renderItem:function(e){var t=e.item,a=t.serial,r=t.abi,i=t.height,s=t.locale,f=t.manufacturer,h=t.model,E=t.name,x=t.width,w=t.state,I=t.url;return p.a.createElement(g.a,null,p.a.createElement(g.a.Title,null,E),p.a.createElement(g.a.Divider,null),p.a.createElement(m.a,{style:y.deviceContainer},p.a.createElement(l.a,{style:y.deviceImage,resizeMode:"center",source:n(305)("./"+h+".png")}),p.a.createElement(m.a,{style:y.deviceInfo},p.a.createElement(d.a,null,f),p.a.createElement(m.a,{style:y.padding}),p.a.createElement(d.a,null,h),p.a.createElement(m.a,{style:y.padding}),p.a.createElement(d.a,null,x+"X"+i),p.a.createElement(m.a,{style:y.padding}),p.a.createElement(d.a,null,r),p.a.createElement(m.a,{style:y.padding}),p.a.createElement(d.a,null,s),p.a.createElement(m.a,{style:y.padding}),p.a.createElement(m.a,{style:y.deviceReserve},p.a.createElement(o.a,{disabled:"progress..."===w||"setup..."===w||"reserved"===w,color:"#66BB6A",onPress:function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if("open"!=w){e.next=6;break}return e.next=3,c.a.awrap(b.b(I));case 3:e.sent,e.next=8;break;case 6:v(u.map((function(e){return e.serial===a&&(e.state="progress..."),e}))),k(a);case 8:case"end":return e.stop()}}),null,null,null,Promise)},title:w||"Reserve",accessibilityLabel:"Reserve a phone"})))))},numColumns:3,keyExtractor:function(e,t){return t}}))}function k(t){fetch("https://us-central1-instamaterial-2eb76.cloudfunctions.net/requestDevice?serial="+t+"&token="+e.fcmToken,{method:"GET",headers:{Authorization:"Bearer "+e.idToekn}}).then((function(e){return e.json()})).then((function(e){}))}h.getToken({vapidKey:"BMsOZS5g4PFGm0a2XRjl0aHfsJ0B-HxWIXHb8f7vXmKwPKeSfCvFom6q4aB1bmP7xrangd8M8A_RTcd_BnjTvzA"}).then((function(t){t?e.fcmToken=t:console.log("No registration token available. Request permission to generate one.")})).catch((function(e){console.log("An error occurred while retrieving token. ",e)}));var y=u.a.create({deviceContainer:{flex:1,flexDirection:"row"},deviceImage:{width:100,height:200},deviceInfo:{flex:1,marginStart:10,flexDirection:"column"},deviceReserve:{position:"absolute",bottom:0,right:0},padding:{padding:4}})}).call(this,n(40))},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n.n(a);function i(e){var t,n=e.navigation;return r.a.createElement("iframe",{src:(null==n||null==(t=n.params)?void 0:t.url)||"https://google.com"})}},245:function(e,t,n){e.exports=n(246)},246:function(e,t,n){"use strict";n.r(t);var a=n(343),r=n(173);Object(a.a)(r.a)},305:function(e,t,n){var a={"./Android SDK built for x86_64.png":306,"./HUAWEI VNS-L31.png":307,"./JKM-LX2.png":308};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=305},306:function(e,t,n){e.exports=n.p+"static/media/Android SDK built for x86_64.be564da8.png"},307:function(e,t,n){e.exports=n.p+"static/media/HUAWEI VNS-L31.be564da8.png"},308:function(e,t,n){e.exports=n.p+"static/media/JKM-LX2.be564da8.png"}},[[245,1,2]]]);
//# sourceMappingURL=app.08ab34ff.chunk.js.map