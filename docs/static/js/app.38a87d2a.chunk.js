(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{310:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return p}));t(598);var a=t(0),r=t.n(a),c=t(199),o=t(613),i=t(331),s=t(369),u=t(160),l=t(3),f=t(370),d=t.n(f);u.a();var m=Object(o.a)();function p(){return r.a.createElement(c.a,null,r.a.createElement(m.Navigator,null,r.a.createElement(m.Screen,{name:"Login",component:v}),r.a.createElement(m.Screen,{name:"Select Device",component:i.a}),r.a.createElement(m.Screen,{name:"Device",component:s.a})))}function v(n){var t=n.navigation;return Object(a.useEffect)((function(){new BroadcastChannel("auth-channel").onmessage=function(n){e.user=n.data,e.userInfo=d.a.decode(e.user.id_token),t.navigate("Select Device")}})),r.a.createElement(l.a,{style:{flex:1,alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{className:"g-signin2","data-onsuccess":"onSignIn","data-theme":"dark"}))}}).call(this,t(31))},331:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return E}));var a=t(18),r=t.n(a),c=t(15),o=t.n(c),i=t(366),s=t(100),u=t(35),l=t(1),f=t(26),d=t(3),m=t(0),p=t.n(m),v=t(163),g=(t(600),t(160)),h=t(365);function E(n){n.navigation;var a=Object(m.useState)([]),c=r()(a,2),l=c[0],E=c[1],y=Object(m.useRef)(l);function x(){fetch("https://us-central1-instamaterial-2eb76.cloudfunctions.net/devices",{method:"GET",headers:{Authorization:"Bearer "+e.user.id_token}}).then((function(e){return e.json()})).then((function(e){E(e)}))}return y.current=l,Object(m.useEffect)((function(){var n=1,t=Object(h.io)("https://proxy.telereso.io",{autoConnect:!1,reconnection:!1,withCredentials:!0,query:{token:e.user.id_token}});t.io.on("close",(function e(){n>=2||(n++,setTimeout((function(){t.io.open((function(n){n&&e()}))}),2e3))})),t.onAny((function(e){console.log(e)})),t.on("connect",(function(){e.token=t.id,console.log(e.token)})),t.on("connect_error",(function(e){console.log("connect_error due to "+e.message)})),t.on("disconnect",(function(){console.log(t.id)})),t.on("device",(function(e){switch(e.state){case"NA":E(l.filter((function(n){return n.serial!=e.serial})));break;case"reserved":E(y.current.map((function(n){return n.serial==e.serial&&(n.state="reserved"),n})));break;case"A":E(y.current.map((function(n){return n.serial==e.serial&&(n.state=null),n})));break;case"setup":E(y.current.map((function(n){return n.serial==e.serial&&(n.state=e.state+"..."),n})));break;case"ready":E(y.current.map((function(n){return n.serial==e.serial&&(n.state="open",n.url=e.url),n})));break;default:console.log(e)}})),t.on("devices",(function(e){switch(e.state){case"devices_refreshed":x()}x()})),t.connect(),x()}),[]),p.a.createElement(d.a,{style:{flex:1,alignItems:"center",justifyContent:"center"}},p.a.createElement(s.a,{data:l,renderItem:function(e){var n=e.item,a=n.serial,r=n.abi,c=n.height,s=n.locale,m=n.manufacturer,h=n.model,y=n.name,x=n.width,w=n.state,j=n.url;return p.a.createElement(v.a,null,p.a.createElement(v.a.Title,null,y),p.a.createElement(v.a.Divider,null),p.a.createElement(d.a,{style:k.deviceContainer},p.a.createElement(u.a,{style:k.deviceImage,resizeMode:"center",source:t(462)("./"+h+".png")}),p.a.createElement(d.a,{style:k.deviceInfo},p.a.createElement(f.a,null,m),p.a.createElement(d.a,{style:k.padding}),p.a.createElement(f.a,null,h),p.a.createElement(d.a,{style:k.padding}),p.a.createElement(f.a,null,x+"X"+c),p.a.createElement(d.a,{style:k.padding}),p.a.createElement(f.a,null,r),p.a.createElement(d.a,{style:k.padding}),p.a.createElement(f.a,null,s),p.a.createElement(d.a,{style:k.padding}),p.a.createElement(d.a,{style:k.deviceReserve},p.a.createElement(i.a,{disabled:"progress..."===w||"setup..."===w||"reserved"===w,color:"#66BB6A",onPress:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if("open"!=w){e.next=6;break}return e.next=3,o.a.awrap(g.b(j));case 3:e.sent,e.next=8;break;case 6:E(l.map((function(e){return e.serial===a&&(e.state="progress..."),e}))),b(a);case 8:case"end":return e.stop()}}),null,null,null,Promise)},title:w||"Reserve",accessibilityLabel:"Reserve a phone"})))))},numColumns:3,keyExtractor:function(e,n){return n}}))}function b(n){fetch("https://us-central1-instamaterial-2eb76.cloudfunctions.net/requestDevice?serial="+n+"&token="+e.token,{method:"GET",headers:{Authorization:"Bearer "+e.user.id_token}}).then((function(e){return e.json()})).then((function(e){}))}var k=l.a.create({deviceContainer:{flex:1,flexDirection:"row"},deviceImage:{width:100,height:200},deviceInfo:{flex:1,marginStart:10,flexDirection:"column"},deviceReserve:{position:"absolute",bottom:0,right:0},padding:{padding:4}})}).call(this,t(31))},369:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var a=t(0),r=t.n(a);function c(e){var n,t=e.navigation;return r.a.createElement("iframe",{src:(null==t||null==(n=t.params)?void 0:n.url)||"https://google.com"})}},383:function(e,n,t){e.exports=t(384)},384:function(e,n,t){"use strict";t.r(n);var a=t(614),r=t(310);Object(a.a)(r.a)},462:function(e,n,t){var a={"./Android SDK built for x86_64.png":463,"./HUAWEI VNS-L31.png":464,"./JKM-LX2.png":465};function r(e){var n=c(e);return t(n)}function c(e){if(!t.o(a,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=462},463:function(e,n,t){e.exports=t.p+"static/media/Android SDK built for x86_64.be564da8.png"},464:function(e,n,t){e.exports=t.p+"static/media/HUAWEI VNS-L31.be564da8.png"},465:function(e,n,t){e.exports=t.p+"static/media/JKM-LX2.be564da8.png"},479:function(e,n){},481:function(e,n){},493:function(e,n){},495:function(e,n){},523:function(e,n){},525:function(e,n){},526:function(e,n){},531:function(e,n){},533:function(e,n){},539:function(e,n){},541:function(e,n){},560:function(e,n){},572:function(e,n){},575:function(e,n){}},[[383,1,2]]]);
//# sourceMappingURL=app.38a87d2a.chunk.js.map